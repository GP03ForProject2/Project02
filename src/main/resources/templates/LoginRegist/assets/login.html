<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>注册</title>

    <!-- CSS -->
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:400,100,300,500">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/form-elements.css">
    <link rel="stylesheet" href="assets/css/style.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Favicon and touch icons -->
    <link rel="shortcut icon" href="assets/ico/favicon.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">

</head>

<body>
<!-- Content -->
<div class="top-content">
    <div class="inner-bg">
        <div class="row">
            <div class="col-sm-8 col-sm-offset-2 text">
            </div>
        </div>
        <!-- MODAL -->
        <div class="top-big-link" id="modal-register" >
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">
                        </button>
                        <h3 class="modal-title" id="modal-register-label">开始登录</h3>
                        <p>输入您的用户名和密码：</p>
                    </div>


                                        <div class="modal-body">

                        <form role="form" action="/user/loginUser" method="post" class="registration-form">
                            <div class="form-group">
                                <span class="u_user"></span>
                                <label class="sr-only" for="form-name">用户名</label>
                                <input type="text" name="form-first-name" placeholder="用户名..." class="form-first-name form-control" id="form-name">
                            </div>
                            <div class="form-group">
                                <span class="u_user"></span>
                                <label class="sr-only" for="form-Password">密码</label>
                                <input type="text" name="form-last-name" placeholder="密码..." class="form-Password form-control" id="form-Password">
                            </div>
                            <div class="errorText" id="error_box"><br></div>
<!--                            <button onclick="fnLogin()"  class="btn">登录</button>-->
                            <div class="#">
                                <button onclick="fnLogin()"  class="btn">登录</button>
                            </div>
                            <br>
                            <a href="regist.html" style="color: #FFFFFF" > 
                            <div>
                                <button  class="btn" >注册</button>
                            </div></a>
                           

                        </form>

                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<!-- Javascript -->
<script src="assets/js/jquery-1.11.1.min.js"></script>
<script src="assets/bootstrap/js/bootstrap.min.js"></script>
<script src="assets/js/jquery.backstretch.min.js"></script>
<script src="assets/js/scripts.js"></script>
<script src="assets/js/login.js"></script>

</body>
<script type="text/javascript">

    $("#btn").click(function(){
        var username=$("#username").val();
        var password=$("#password").val();
        console.log(username);
        console.log(password);
        var error="";
        if (username.length=="") {
            error+="用户名不能为空";
            error+="\n";
        }
        if (password.length=="") {
            error+="密码不能为空";
            error+="\n";
        }
        if (error!="") {
            alert(error);
        }
        else{
            /* debugger */
            $.ajax({
                type:'POST',
                /* dataType:'json', */
                dataType:'json',
                url:'http://localhost:8080/login',
                contentType:'application/json;charset=UTF-8',

                data:JSON.stringify({"username":username,"password":password}),

                success:function(data){//返回json结果

                    //username==data.username&&password==data.password
                    if(username==data.username&&password==data.password){
                        //alert("用户名密码错误");//JSON.stringify(data)
                        window.location.href="success.html?username="+data.username;
                        //data.username
                    }
                    else {
                        //debugger;
                        alert("用户名密码,错误");
                    }
                }
            });

            /* console.log({"username":username,"password":password}); */
        }
    });

</script>
</html>